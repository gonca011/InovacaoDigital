<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Adicionar Conte√∫dos - LABRATS</title>
  <link rel="stylesheet" href="../css/PlanoAuditoria.css">
  <link rel="icon" href="../Imagens/Logo.png" type="image/x-icon" />
</head>

<body>
  <div class="sidebar" style="background-color: #D8ECFF;">
    <div class="logo">
      <img src="../Imagens/Logo.png" alt="EyesEverywhere" />
    </div>
    <nav>
      <ul>
      <li><a data-page="Geral.html" href="Geral.html">üè† Vis√£o Geral</a></li>
      <li><a data-page="Horario.html" href="Horario.html">üóìÔ∏è Hor√°rio</a></li>
      <li><a class="Alunos.html" data-page="Alunos.html" href="Alunos.html">üë• Alunos</a></li>
      <li><a data-page="Conteudos.html" href="Conteudos.html">üìö Conte√∫dos</a></li>
      </ul>
    </nav>
    <div class="add-auditoria" ;">
      <a href="AddConteudos.html">
        <button>+ Adicionar Conte√∫do</button>
      </a>
    </div>
    <div class="user-info">
      <p id="user-name">Vers√£o MVP</p>
      <p id="user-email">Sem e-mail</p>
    </div>
  </div>

  <div class="content">
    <header>
      <h1>Conte√∫dos</h1>
      <p>Preencha o conte√∫do com as informa√ß√µes necess√°rias</p>
    </header>

    <form id="form-auditoria" class="form-auditoria">
      <section class="detalhes-auditoria">
        <h2>Detalhes da Disciplina</h2>
        <label for="nome"> Nome <span style="color: red;" title="Este campo √© obrigat√≥rio">*</span> </label>
        <input type="text" id="nome" name="nome" required>
      </section>

      <section class="localizacao">
        <h2>Ano de Escolaridade</h2>
        <label for="codigo-postal">Ano de Escolaridade  <span style="color: red;" title="Este campo √© obrigat√≥rio">*</span> </label>
        <input type="text" id="codigo-postal" name="codigo-postal" required>
      </section>

      <!--Acorde√£o para, caso selecione "sim" definir data de entrega, caso selecione "n√£o" ocultar -->
      <div class="acordeao" style="margin-top: 20px; margin-bottom: 20px;">
        <label>Possui Data de Entrega?</label>
        <div class="acordeao-opcoes">
          <input type="radio" id="material-sim" name="material" value="sim">
          <label for="material-sim">Sim</label>

          <input type="radio" id="material-nao" name="material" value="nao" checked>
          <label for="material-nao">N√£o</label>
        </div>
      </div>
      
      <section class="data-hora">
        <h2>Dia e Hora</h2>
        <label for="data">Data  <span style="color: red;" title="Este campo √© obrigat√≥rio">*</span></label>
        <input type="date" id="data" name="data" required>

        <label for="hora-inicio">In√≠cio  <span style="color: red;" title="Este campo √© obrigat√≥rio">*</span> </label>
        <input type="time" id="hora-inicio" name="hora-inicio" required>

        <label for="tempo-previsto">Tempo Previsto (horas)  <span style="color: red;" title="Este campo √© obrigat√≥rio">*</span> </label>
        <input type="number" id="tempo-previsto" name="tempo-previsto" min="1" step="1" placeholder="Ex: 100" required>

      </section>


      <!-- Gravidade -->
      <section class="gravidade-section" style="margin-top: 20px; margin-bottom: 20px;">
        <label>Dificuldade do Exerc√≠cio:</label>
        <div id="gravidade-container" style="display: flex; gap: 10px; margin-top: 8px;">
          <div class="gravidade-bola" data-valor="1" title="Gravidade 1" style="width: 24px; height: 24px; border-radius: 50%; background-color: #ddd; cursor: pointer;"></div>
          <div class="gravidade-bola" data-valor="2" title="Gravidade 2" style="width: 24px; height: 24px; border-radius: 50%; background-color: #ddd; cursor: pointer;"></div>
          <div class="gravidade-bola" data-valor="3" title="Gravidade 3" style="width: 24px; height: 24px; border-radius: 50%; background-color: #ddd; cursor: pointer;"></div>
          <div class="gravidade-bola" data-valor="4" title="Gravidade 4" style="width: 24px; height: 24px; border-radius: 50%; background-color: #ddd; cursor: pointer;"></div>
          <div class="gravidade-bola" data-valor="5" title="Gravidade 5" style="width: 24px; height: 24px; border-radius: 50%; background-color: #ddd; cursor: pointer;"></div>
        </div>
        <input type="hidden" id="gravidade-selecionada" value="1" />
      </section>

      <button type="submit" class="btn-confirmar">Confirmar</button>
    </form>
  </div>

  <div id="feedback-message" class="feedback-message"></div>

  <script>
    // Fun√ß√£o para atualizar as informa√ß√µes do utilizador
    function atualizarUtilizador() {
      const nome = localStorage.getItem("userName") || "Vers√£o MVP";
      const email = localStorage.getItem("userEmail") || "Sem e-mail";
      document.getElementById("user-name").innerText = nome;
      document.getElementById("user-email").innerText = email;
    }
  

    // Sele√ß√£o da gravidade
    const bolas = document.querySelectorAll(".gravidade-bola");
    const inputGravidade = document.getElementById("gravidade-selecionada");

    function atualizarVisualGravidade(valorSelecionado) {
      bolas.forEach(bola => {
        const valor = bola.getAttribute("data-valor");
        if (parseInt(valor) <= valorSelecionado) {
          bola.style.backgroundColor = "#0088FE"; // Cor azul para selecionado
        } else {
          bola.style.backgroundColor = "#ddd"; // Cinzento para n√£o selecionado
        }
      });
    }

    bolas.forEach(bola => {
      bola.addEventListener("click", () => {
        const valor = parseInt(bola.getAttribute("data-valor"));
        inputGravidade.value = valor;
        atualizarVisualGravidade(valor);
      });
    });

    // Inicializa com gravidade 1 selecionada
    atualizarVisualGravidade(1);


    // Mostrar/ocultar sec√ß√£o "Dia e Hora" conforme escolha em "Possui Material de Apoio?"
    const materialSim = document.getElementById('material-sim');
    const materialNao = document.getElementById('material-nao');
    const dataHoraSection = document.querySelector('.data-hora');
    const dataInput = document.getElementById('data');
    const horaInicioInput = document.getElementById('hora-inicio');
    const tempoPrevistoInput = document.getElementById('tempo-previsto');

    function toggleMaterialFields() {
      if (materialSim && materialSim.checked) {
        dataHoraSection.style.display = '';
        dataInput.required = true;
        horaInicioInput.required = true;
        tempoPrevistoInput.required = true;
      } else {
        dataHoraSection.style.display = 'none';
        dataInput.required = false;
        horaInicioInput.required = false;
        tempoPrevistoInput.required = false;
        // limpar valores para evitar submiss√£o indesejada
        dataInput.value = '';
        horaInicioInput.value = '';
        tempoPrevistoInput.value = '';
      }
    }

    if (materialSim && materialNao) {
      materialSim.addEventListener('change', toggleMaterialFields);
      materialNao.addEventListener('change', toggleMaterialFields);
    }

    // Ao carregar a p√°gina
    document.addEventListener("DOMContentLoaded", function() {
     // Inicializa visibilidade com base na op√ß√£o selecionada
      toggleMaterialFields();
      atualizarUtilizador();

      // Submiss√£o do formul√°rio: valida√ß√£o nativa e redirecionamento s√≥ quando v√°lido
      const form = document.getElementById('form-auditoria');
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          if (!form.checkValidity()) {
            form.reportValidity();
            return;
          }
          window.location.href = 'promo.html';
        });
      }
    });
  </script>

</body>
</html>
